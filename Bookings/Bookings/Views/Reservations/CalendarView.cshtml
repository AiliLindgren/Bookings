@model Bookings.Models.ViewModels.CalendarDayVM[]
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    ViewBag.Title = "Booking";
    ViewBag.Header = "Pick a date!";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <style>
        .dropbtn {
            background-color: #4CAF50;
            color: white;
            padding: 16px;
            font-size: 16px;
            border: none;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f1f1f1;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
        }

            .dropdown-content a {
                color: black;
                padding: 12px 16px;
                text-decoration: none;
                display: block;
            }

                .dropdown-content a:hover {
                    background-color: #ddd;
                }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown:hover .dropbtn {
            background-color: #3e8e41;
        }
    </style>
</head>
<body>

    <div class="box">

        <span>Ticket price:</span>
        <span id="ticketPrice">100</span>
        <span>kr</span>
        <br>
        <span>Number of people:</span>
        <button onclick="changeAmount('-', '100', 'numberOfPeople', 'totalPrice', 'totalPeople')">-</button>
        <span id="numberOfPeople">0</span>
        <button onclick="changeAmount('+', '100', 'numberOfPeople', 'totalPrice', 'totalPeople')">+</button>
        <br>
        <br>
        <br>
        <span>Date and time: </span> <span id="chosenDateAndTime"> </span>
        @*<span>Time:</span> <span id="chosenTime">14:00</span>*@
        <br>
        <br>
        <span>Total amount to pay:</span> <span id="totalPrice">0</span> <span>kr</span>
        <br>
        <span>Total number of people:</span> <span id="totalPeople">0</span>
        <br>
        <input type="button" value="Klicka för datum och tid" id="btnGetJSON" />
        @*<div id="divStuff"></div>*@

        @section scripts
{
            <script>             
                // JSON
                $("#btnGetJSON").click(function () {
                    // Make AJAX call
                    $.ajax({
                        url: "/timebox-data",
                        type: "GET",
                        success: function (result) {
                            // Call done - update DOM
                            $("#chosenDateAndTime").html("<b>" + result.time + "</b>");
                        }
                    });
                });
            </script>
        }


    </div>



    <div class="w3-container w3-center w3-animate-left">
        <div class="column"
    <div class="card">
        <h1 class="h3"> </h1>
    </div>
    <div class="column"
    <table class="t1">
        <div class="grid-container">
            <div class="grid-item">Mon</div>
            <div class="grid-item">Tue</div>
            <div class="grid-item">Wed</div>
            <div class="grid-item">Thu</div>
            <div class="grid-item">Fri</div>
            <div class="grid-item">Sat</div>
            <div class="grid-item">Sun</div>


            @foreach (var item in Model)
            {
                @if (item.FakeDay)
                {
                    <div class="grid-item"> </div>
                }
                else if (!item.IsClosed)
                {
        <div class="grid-item-free">
            @item.StartDateTime.Date.ToString("d.")
            <div class="dropdown">
                <button class="dropbtn">pick</button>
                <div class="dropdown-content">
                    <ul>
                        @foreach (var slot in item.CalendarTimeSlots)
                        {
                            if (!slot.IsFull)
                            {
                             <li>@slot.StartDateTime.ToString("h:mm") - @slot.EndDateTime.ToString("h:mm")</li>
                            }
                            else
                            {
                                <b style="color: gray">@slot.StartDateTime.ToString("h:mm")</b>
                            }
                        }
                    </ul>

            </div>
            </div>
        </div>
            }
            else if (item.IsFull)
            {
            <div class="grid-item-full">
                @item.StartDateTime.Date.ToString("d.")

            </div>
            }
            else
            {
            <div class="grid-item-occupied">
                @item.StartDateTime.Date.ToString("d.")

            </div>
            }


            }

        </div>

    </table>
             @*<label class="lead mr-2 ml-2" for="month">Jump To: </label>*@
    <select class="form-control col-sm-4" name="month" id="month" onchange="jump()">


        <option value=0>Jan</option>
        <option value=1>Feb</option>
        <option value=2>Mar</option>
        <option value=3>Apr</option>
        <option value=4>May</option>
        <option value=5>Jun</option>
        <option value=6>Jul</option>
        <option value=7>Aug</option>
        <option value=8>Sep</option>
        <option value=9>Oct</option>
        <option value=10>Nov</option>
        <option value=11>Dec</option>
    </select>
 <script>
     function jump() {
    currentYear = parseInt(selectYear.value);
    currentMonth = parseInt(selectMonth.value);
    showCalendar(currentMonth, currentYear);
}

        // HTML//anonym funktionclick event kopplat till id( som get element by id)
        /**/
        $("#month").onchange(function () {
            // Make AJAX call
            $.ajax({
                url: "/CalendarView/5",
                type: "GET",
                success: function (result) {
                    // Call done - update DOM
                    $("#grid-container").html(result);
                }
            });
        });


    </script>

       <div class="dropdown">
            <button class="dropbtn">Pick Month</button>
            <div class="dropdown-content">
                    <a href="/CalendarView/1">Jan</a>
                    <a href="/CalendarView/2">Feb</a>
                    <a href="/CalendarView/3">Mars</a>
                    <a href="/CalendarView/4">April</a>
                    <a href="/CalendarView/5">Maj</a>
                    <a href="/CalendarView/6">Juni</a>
                    <a href="/CalendarView/7">Juli</a>
                    <a href="/CalendarView/8">Augusti</a>
                    <a href="/CalendarView/9">Sept</a>
                    <a href="/CalendarView/10">Oct</a>
                    <a href="/CalendarView/11">Nov</a>
                    <a href="/CalendarView/12">Dec</a>
</div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    @*<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"></script>*@
    <script src="TestKomponent.js"></script>


</body>
</html>

