@model Bookings.Models.ViewModels.CalendarDayVM[]
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    ViewBag.Title = "Booking";
}



    <div class="w3-container w3-center w3-animate-left">
       
      <div class="column"
          <div class="card">
              <div style="float:right" class="dropdown">
                  <button class="dropbtn" style="position:center">Pick Month</button>
                  <div class="dropdown-content">

                      <a href="javascript:ChangeMonth(1)">Jan</a>
                      <a href="javascript:ChangeMonth(2)">Feb</a>
                      <a href="javascript:ChangeMonth(3)">Mar</a>
                      <a href="javascript:ChangeMonth(4)">Apr</a>
                      <a href="javascript:ChangeMonth(5)">May</a>
                      <a href="javascript:ChangeMonth(6)">Jun</a>
                      <a href="javascript:ChangeMonth(7)">Jul</a>
                      <a href="javascript:ChangeMonth(8)">Aug</a>
                      <a href="javascript:ChangeMonth(9)">Sep</a>
                      <a href="javascript:ChangeMonth(10)">Oct</a>
                      <a href="javascript:ChangeMonth(11)">Nov</a>
                      <a href="javascript:ChangeMonth(12)">Dec</a>
                  </div>
              </div>
              <span style="font-size:30px">@Model[10].StartDateTime.ToString("MMMM")</span>
          </div>
        </div>
            <div class="column">
            <table class="t1">
            <div class="grid-container">
            <div class="grid-item">Mon</div>
            <div class="grid-item">Tue</div>
            <div class="grid-item">Wed</div>
            <div class="grid-item">Thu</div>
            <div class="grid-item">Fri</div>
            <div class="grid-item">Sat</div>
            <div class="grid-item">Sun</div>


        @foreach (var item in Model)
        {


            @if (item.FakeDay)
            {
                <div class="grid-item"> </div>
            }
            else if (item.StartDateTime.Date < DateTime.Today)
            {
                <div class="grid-item-occupied">
                @item.StartDateTime.Date.ToString("d.")
                <div class="dropdown">
                <button class="dropbtn-passed">Time passed</button>
                </div>
                </div>
            }
            else if (!item.IsClosed && !item.IsFull)
            {
                <div class="grid-item-free">

                @item.StartDateTime.Date.ToString("d.")
                <div class="dropdown">
                <button class="dropbtn">Pick</button>
                <div class="dropdown-content">


                    <select onclick="aFunction(this)">
                        @foreach (var slot in item.CalendarTimeSlots)
                        {

                            if (!slot.IsFull)
                            {
                                @*@ TODO: LOOK AT ME(3) - use class not ID.IDs are for things unique in a page @*@
                            <option id="dataToPass" class="dataToPass" value="@slot.StartDateTime">@slot.StartDateTime.ToString("H:mm")  Places left: @slot.PlacesLeft </option>

                            }
                                                                        else if (slot.IsFull)
                                                                        {
                                                                         <b style="color: gray">@slot.StartDateTime.ToString("H:mm")</b>
                                                                        }
                                                                        else
                                                                        {
                                                                         <b style="color: gray">@slot.StartDateTime.ToString("H:mm")</b>
                                                                        }
                         }
                    </select>

                </div>
                </div>
                </div>

            }
            else if (item.IsFull)
            {
                <div class="grid-item-full">
                @item.StartDateTime.Date.ToString("d.")


                </div>
            }
            else
            {
                <div class="grid-item-occupied">
                @item.StartDateTime.Date.ToString("d.")

                </div>
            }

        }

        </div>

        </table>
        </div>
        </div>
    </div>

